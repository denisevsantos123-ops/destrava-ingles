
      <!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <title>Destrava InglÃªs</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      background: #f2f6ff;
      padding: 20px;
    }
    h1 {
      color: #2a4d9b;
    }
    input, button {
      width: 100%;
      padding: 10px;
      margin-top: 8px;
      font-size: 16px;
    }
    .card {
      background: #fff;
      padding: 15px;
      border-radius: 10px;
      margin-top: 20px;
      box-shadow: 0 2px 6px rgba(0,0,0,0.1);
    }
    ul {
      list-style: none;
      padding: 0;
    }
    li {
      margin-bottom: 15px;
    }
  </style>
</head>

<body>

<h1>ğŸ‡ºğŸ‡¸ Destrava InglÃªs</h1>

<div class="card">
  <label>Frase ou palavra em inglÃªs:</label>
  <input type="text" id="english">

  <label>TraduÃ§Ã£o em portuguÃªs:</label>
  <input type="text" id="portuguese">

  <button onclick="playNormal()">ğŸ”Š Ouvir (normal)</button>
  <button onclick="playSlow()">ğŸ¢ Ouvir (devagar)</button>
  <button onclick="startRecording()">ğŸ¤ Gravar minha voz</button>
  <button onclick="stopRecording()">â¹ï¸ Parar gravaÃ§Ã£o</button>
  <button onclick="savePhrase()">ğŸ’¾ Salvar para estudar</button>
  <button onclick="modoRevisao()">ğŸ“š Revisar frases</button>
</div>

<div class="card">
  <h3>ğŸ“˜ Minhas frases</h3>
  <ul id="list"></ul>
</div>

<script>
const list = document.getElementById("list");

// ====== VOZ DO SISTEMA ======
function playNormal() {
  const text = english.value;
  if (!text) return alert("Digite a frase em inglÃªs");
  const msg = new SpeechSynthesisUtterance(text);
  msg.lang = "en-US";
  msg.rate = 1;
  speechSynthesis.speak(msg);
}

function playSlow() {
  const text = english.value;
  if (!text) return alert("Digite a frase em inglÃªs");
  const msg = new SpeechSynthesisUtterance(text);
  msg.lang = "en-US";
  msg.rate = 0.7;
  speechSynthesis.speak(msg);
}

// ====== GRAVAÃ‡ÃƒO ======
let recorder;
let audioChunks = [];
let lastAudioBlob = null;

function startRecording() {
  navigator.mediaDevices.getUserMedia({ audio: true })
    .then(stream => {
      recorder = new MediaRecorder(stream);
      recorder.start();
      audioChunks = [];
      recorder.ondataavailable = e => audioChunks.push(e.data);
      recorder.onstop = () => {
        lastAudioBlob = new Blob(audioChunks);
        alert("Ãudio gravado âœ…");
      };
    })
    .catch(() => alert("PermissÃ£o do microfone negada"));
}

function stopRecording() {
  if (recorder && recorder.state === "recording") {
    recorder.stop();
  }
}

// ====== SALVAR FRASE ======
function savePhrase() {
  const eng = english.value;
  const pt = portuguese.value;

  if (!eng || !pt) return alert("Preencha os dois campos");
  if (!lastAudioBlob) return alert("Grave sua voz antes de salvar");

  const frases = JSON.parse(localStorage.getItem("frases")) || [];

  frases.push({
    eng,
    pt,
    audio: URL.createObjectURL(lastAudioBlob)
  });

  localStorage.setItem("frases", JSON.stringify(frases));

  english.value = "";
  portuguese.value = "";
  lastAudioBlob = null;

  carregarLista();
}

// ====== LISTA NORMAL ======
function carregarLista() {
  list.innerHTML = "";
  const frases = JSON.parse(localStorage.getItem("frases")) || [];

  frases.forEach(frase => {
    const li = document.createElement("li");
    li.innerHTML = `
      <strong>${frase.eng}</strong> - ${frase.pt}<br>
      <button onclick="playAudio('${frase.audio}')">â–¶ï¸ Ouvir minha voz</button>
    `;
    list.appendChild(li);
  });
}

function playAudio(src) {
  const audio = new Audio(src);
  audio.play();
}

// ====== MODO REVISÃƒO ======
function modoRevisao() {
  list.innerHTML = "";
  const frases = JSON.parse(localStorage.getItem("frases")) || [];

  if (frases.length === 0) {
    alert("Nenhuma frase salva ainda");
    return;
  }

  frases.sort(() => Math.random() - 0.5);

  frases.forEach(frase => {
    const li = document.createElement("li");
    li.innerHTML = `
      <strong>${frase.eng}</strong><br>
      <button onclick="playNormalFromText('${frase.eng}')">ğŸ”Š Ouvir</button>
    `;
    list.appendChild(li);
  });
}

function playNormalFromText(text) {
  const msg = new SpeechSynthesisUtterance(text);
  msg.lang = "en-US";
  msg.rate = 1;
  speechSynthesis.speak(msg);
}

// carregar ao abrir
carregarLista();
</script>

</body>
</html>
  
