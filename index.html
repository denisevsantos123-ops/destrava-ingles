<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <title>Destrava InglÃªs</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      background: #f2f6ff;
      padding: 20px;
    }
    h1 {
      color: #2a4d9b;
    }
    textarea, input, button {
      width: 100%;
      margin-top: 10px;
      padding: 10px;
      font-size: 16px;
    }
    .card {
      background: white;
      padding: 15px;
      border-radius: 10px;
      margin-top: 20px;
      box-shadow: 0 2px 5px rgba(0,0,0,0.1);
    }
  </style>
</head>
<body>

  <h1>ğŸ‡ºğŸ‡¸ Destrava InglÃªs</h1>

  <div class="card">
    <label>Frase ou palavra em inglÃªs:</label>
    <input type="text" id="english">

    <label>TraduÃ§Ã£o em portuguÃªs:</label>
    <input type="text" id="portuguese">

    <button onclick="playNormal()">ğŸ”Š Ouvir (normal)</button>
<button onclick="playSlow()">ğŸ¢ Ouvir (devagar)</button>
<button onclick="startRecording()">ğŸ™ï¸ Gravar minha voz</button>
<button onclick="savePhrase()">ğŸ’¾ Salvar para estudar</button>
<button onclick="stopRecording()">â¹ Parar gravaÃ§Ã£o</button>

  <div class="card">
    <h3>ğŸ“š Minhas frases</h3>
    <ul id="list"></ul>
  </div>

  <script>
    const list = document.getElementById("list");
function playNormal() {
  const text = document.getElementById("english").value;
  if (!text) {
    alert("Digite uma frase em inglÃªs primeiro");
    return;
  }
  const msg = new SpeechSynthesisUtterance(text);
  msg.lang = "en-US";
  msg.rate = 1;
  speechSynthesis.speak(msg);
}

function playSlow() {
  const text = document.getElementById("english").value;
  if (!text) {
    alert("Digite uma frase em inglÃªs primeiro");
    return;
  }
  const msg = new SpeechSynthesisUtterance(text);
  msg.lang = "en-US";
  msg.rate = 0.7;
  speechSynthesis.speak(msg);
}


let recorder;
let audioChunks = [];
let lastAudioBlob = null;

function startRecording() {
  navigator.mediaDevices.getUserMedia({ audio: true })
    .then(stream => {
      recorder = new MediaRecorder(stream);
      recorder.start();
      audioChunks = [];

      recorder.ondataavailable = e => audioChunks.push(e.data);

      recorder.onstop = () => {
        lastAudioBlob = new Blob(audioChunks);
        alert("Ãudio gravado com sucesso âœ…");
      };
    })
    .catch(() => alert("PermissÃ£o de microfone negada"));
}

  function stopRecording() {
  if (recorder && recorder.state === "recording") {
    recorder.stop();
  }
  }
     
    function savePhrase() {
      const eng = document.getElementById("english").value;
      const pt = document.getElementById("portuguese").value;
      const audio = lastAudioBlob; 
      if (!audio) {
    alert("Grave sua voz antes de salvar a frase");
    return;
      }

      if (!eng || !pt) {
        alert("Preencha os dois campos");
        return;
      }

      const li = document.createElement("li");

li.audio = audio;
  li.innerHTML = `
<strong>${eng}</strong> - ${pt}
<br>
<button onclick="playMyAudio(this)">â–¶ï¸ Ouvir minha voz</button>
`;
  

list.appendChild(li);

      document.getElementById("english").value = "";
      document.getElementById("portuguese").value = "";
    } 

     
  function playMyAudio(button) {
  const li = button.parentElement;

  if (!li.audio) {
    alert("Esta frase nÃ£o tem Ã¡udio gravado");
    return;
  }

  const audioUrl = URL.createObjectURL(li.audio);
  const audio = new Audio(audioUrl);
  audio.play();
  }
  </script>

</body>
</html>
